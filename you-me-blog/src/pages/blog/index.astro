---
import Mainlayout from '../../layouts/MainLayout.astro';
import PostCard from '../../components/PostCard.astro';
import Main from '../../components/Main.astro';

const allPosts = await Astro.glob("./*.md"); 

// utils 
import { formatBlogPost } from '../../js/utils';

const formattedPosts = formatBlogPost(allPosts, {
  filterOutDrafts: false,
  filterOutFuturePosts: false,
  sortbyDate: true,
});
---

<Mainlayout title="Yefree's blog">
	<Main pageTitle="Blog Entries">
		<p class="main__p">
      Inspiring work and projects from all the resources I like to use to learn, from 
      amazing designers, developers and programmers, along with all my thoughts and 
      opinions.
    </p>
	</Main>
  <section class="entries" aria-label="New blog posts">
    {
      formattedPosts.map((post) => 
        <PostCard frontmatter={post.frontmatter} 
          url={post.url} tagType="h2" />
      )
    }
  </section>
</Mainlayout>

<style lang='scss'>
  .entries{
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(min(12rem, 100%), 1fr));
    gap: 3rem;
  }
</style>